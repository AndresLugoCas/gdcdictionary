$schema: "http://json-schema.org/draft-04/schema#"

id: lane_level_seq
title: Lane Level Seq 
type: object
description: Sequencing reads from one lane of an NGS run
additionalProperties: false
category: data_bundle
validators: null

systemProperties:
    id:
        $ref: "_definitions#/UUID"
    project_id:
        $ref: "_definitions#/UUID"
    state:
        $ref: "_definitions#/data_bundle_state"

links:
    - name: aliquot
      label: derived_from
      target_type: aliquot
      multiplicity: many_to_one
      required: true
      backref: lane_level_seqs

required:
    - type
    - aliquot
    - sequencing_center
    - platform
    - library_strategy
    - library_name
    - is_paried_end
    - read_length
    - read_group_id
    - sequence_file

uniqueKeys:
    - [ id ]
    - [ project_id, read_group_id ]

properties:
    type:
        enum: [ "lane_level_seq" ]
    sequencing_center:
        type: string
    platform:
        enum:
            - ILLUMINA
            - SOLID
            - LS454
            - Ion Torrent
            - PACBIO
    library_strategy:
        enum:
            - WGS
            - WXS
            - RNA-Seq
            - ChIP-Seq
    library_name:
        type: string
    insert_size:
        type: integer
    target_capture_kit_name:  # conditionally required for WXS etc
        type: string
    target_capture_kit_target_region:  # 
        type: string
    is_paried_end:
        type: boolean
    read_length:
        type: integer
    read_group_id:  # it may be good to assign UUID to read group
        type: string
    bqsr_performed:
        type: boolean

    aliquot:
        $ref: "_definitions#/to_one"
