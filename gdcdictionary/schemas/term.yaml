$schema: "http://json-schema.org/draft-04/schema#"

#id: "term"
id: "http://localhost:8080/term.yaml"
title: Term semantic information
type: object
namespace: http://gdc.nci.nih.gov
category: TBD
program: '*'
project: '*'
description: >
  An object that contains information regarding the semantics of any schema item name.
  It can serve as the value for the description key in any schema.
additionalProperties: false
validators: []

systemProperties:
  - id

links:
  - name: synonyms
    label: is_synonym
    backref: synonyms
    multiplicity: many_to_many
    target_type: term
    required: false

uniqueKeys:
  - [id]
  
required:
  - type
  - id
  - term
  - termdef
  
properties:
  type:
    type: string
    enum:
      - term
  id:
#    $ref: "definitions.yaml#/UUID"
    $ref: "http://localhost:8080/definitions.yaml#/UUID"
  term:
    type: string
    description: >
      This is the token as used in the schema or other code that uses the
      term. Put the full text of the term in termdef:term, below.
  termns:
    type: string
    pattern: "^([a-zA-Z_]+\\/?)*$"
    description: >
      Optional namespace string of the form <token1[/token2/...]>. The category
      name of the schema in which the term is referenced is a good standard.
  termdef:
    $ref: "#/definitions/termdef"
  synonyms:
#    $ref: "definitions.yaml#/to_many"
    $ref: "http://localhost:8080/definitions.yaml#/to_many"

definitions:
  termdef:
    type: object
    required:
      - term_id
      - term
      - definition
    properties:
      term_id:
#        $ref: "definitions.yaml#/UUID"
        $ref: "http://localhost:8080/definitions.yaml#/UUID"
      term:
        type: string
      definition:
        type: string
        description: >
          Definition of term, ideally obtained verbatim from one of the
          authorities identified in source property (below)
      locale:
        type: string
        pattern: "^[A-z][A-z]$"
        description: >
          ISO 639-1 two-letter language code (language of term and definition)
      values:
        $ref: "http://json-schema.org/draft-04/schema#"
        description: >
            If the term itself is used as a key elsewhere, the values field
            contains a valid jsonschema that defines the acceptable values
            for the key.
      source:
        type: object
        properties:
          uri:
            type: string
            format: uri
            description: >
              Optional ontology URI for this term (need not resolve);
              can be empty string
          cde:
            type: object
            properties:
              collection_name:
                type: string
                description: >
                  Common name for collection if any (e.g. caDSR, NCIt)
              collection_url:
                type: string
                format: uri
                description: Resolving URL to CDE collection (e.g., caDSR, NCIt)
              cde_id:
                oneOf:
                  - type: string
                  - type: number
                description: >
                  CDE public id for the term, should be queryable at
                  collection URL. Put version number in cde_version
                  property.
              cde_version:
                oneOf:
                  - type: string
                  - type: number
