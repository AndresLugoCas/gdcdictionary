$schema: "http://json-schema.org/draft-04/schema#"

id: "clinical"
title: Clinical
type: object
namespace: http://gdc.nci.nih.gov
category: TBD
program: '*'
project: '*'
description: >
  Data obtained through patient examination or treatment.
  (GDC synonym for NCIt C15783)
additionalProperties: false
validators: null

systemProperties:
  - id
  - project_id

links:
  - name: cases
    backref: clinicals
    label: describes
    target_type: case
    multiplicity: one_to_one
    required: true

required:
  - id
  - cases

uniqueKeys:
  #unclear if want submitter ID for clinical
  - [id]

# clinical properties
properties:
  type:
    type: string
  id:
    $ref: "definitions.yaml#/UUID"
    systemAlias: node_id
    description: "TODO"

  demographics:
    type: object

    required:
      - gender
      - race
      - ethnicity
      - religion
      - year_of_birth
      - year_of_death

    properties:

      gender:
        title: Gender
        #cde_id: 2200604
        description: >
          Text designations that identify gender. Gender is described as the assemblage
          of properties that distinguish people on the basis of their societal roles. CDE: 2200604
        enum:
          - female
          - male
          - unknown
          - unspecified

      race:
        title: Race
        #cde_id: 21922199
        description: >
          The text for reporting information about race based on the Office of
          Management and Budget (OMB) categories. CDE: 2192199."
        enum:
          - white
          - american indian or alaska native
          - black or african american
          - asian
          - native hawaiian or other pacific islander
          - other
          - not reported
          - not allowed to collect

      ethnicity:
        title: Ethnicity
        description: >
          The text for reporting information about ethnicity based on the Office
          of Management and Budget (OMB) categories. CDE: 2192217.
        cde_id: 2200604
        enum:
          - hispanic or latino
          - not hispanic or latino
          - not reported
          - not allowed to collect

      year_of_birth:
        title: Year of Birth
        type: number
        description: >
          Year of Birth
        #cde_id:

      year_of_death:
        title: Year of Death
        type: number
        description: >
          Year of Death
        #cde_id:

  diagnosis:
    type: object
    required:
      - age_at_diagnosis
      - days_to_birth
      - days_to_last_follow_up
      - vital_status
      - primary_diagnosis
      - morphology
      - tissue_or_organ_of_origin
      - site_of_resection_or_biopsy
      - classification_of_tumor
      - tumor_stage
      - tumor_grade
      - progression_or_recurrence
      - days_to_recurrence
      - days_to_last_known_disease_status
      - last_known_disease_status


    properties:
      age_at_diagnosis:
        type: number
        description: >
          Age in days at which a condition or disease was first diagnosed.
          CDE: 3225640. TCGA has the age in years with CDE 2006657,
          this is converted by ceil(age*365.25) to get days.

      days_to_birth:
        type: number
        description: >
          From Dx

      days_to_last_follow_up:
        type: number
        description: >
          From Dx

    vital_status:
      enum:
        - alive
        - dead
        - lost to follow-up
        - unknown
      description: >
        The survival state of the person registered on the protocol. CDE: 5.

    primary_diagnosis:
      type: string
      description: >
        ICD-10,
        The tenth version of the International Classification of Disease (ICD),
        published by the World Health Organization in 1992. A system of numbered
        categories for representation of data. CDE: 3226287.

    morphology:
      type: string
      description: >
        ICD-O-3(M)

    tissue_or_organ_of_origin:
      type: string
      description: >
        ICD-O-3(T)

    site_of_resection_or_biopsy:
      type: string
      description: >
        ICD-O-3(T)

    classification_of_tumor:
      enum:
        - primary
        - metastasis
        - recurrence
        - other
      description: >
        With respect to disease progression/evolution

    prior_malignancy:
      enum:
        - yes
        - no
        - unknown
      description: >
        Optional

    tumor_stage:
      type: string
      description: >
        Using the patient's pathology/laboratory report, Cancer type-specific staging systems such as AJCC (3203222v1.0)

    tumor_grade:
      type: string
      description: >
        Tumor grade based on cancer type-specific grading systems such as Nottingham grading system (Breast) or Gleason scoring system (Prostate), N/A allowed.

    progression_or_recurrence:
      enum:
        - yes
        - no
        - unknown
      description: >

    days_to_recurrence:
      type: number
      description: >
        Days

    last_known_disease_status:
      enum:
        - Distant met recurrence/progression
        - Loco-regional recurrence/progression
        - Biochemical evidence of disease without structural correlate
        - Tumor free
        - Unknown tumor status
        - With tumor
      description: >

  family_history:
    type: object

    relative_with_cancer_history:
      enum:
        - yes
        - no
        - unknown

    relationship_type:
      #TODO should be enum of possible relationship types
      type: string
      description: >

    relationship_gender:
      enum:
        - female
        - male
        - unknown
        - unspecified
      description: >
        Text designations that identify gender. Gender is described as the assemblage
        of properties that distinguish people on the basis of their societal roles. CDE: 2200604

    relationship_age_at_diagonsis:
      type: number
      description: >
        Age in days at which a condition or disease was first diagnosed.
        CDE: 3225640. TCGA has the age in years with CDE 2006657,
        this is converted by ceil(age*365.25) to get days.

    relationship_primary_diagnosis:
      type: string
      description: >
        ICD-10,
        The tenth version of the International Classification of Disease (ICD),
        published by the World Health Organization in 1992. A system of numbered
        categories for representation of data. CDE: 3226287.

  exposure:
    type: object

    years_smoked:
      type: number
      description: >
        3137957v1.0

    cigarettes_per_day:
      type: number
      description: >
        2001716v4.0

    alcohol_history:
      type: string
      description: >
        2193765v1.0

    alcohol_intensity:
      type: string
      description: >
        3457767v1.0

    height:
      type: number
      description: >
        Units? Inches?
        2538920v1.0

    weight:
      type: number
      description: >
        Units? Lbs?
        2630200v1.0

    bmi:
      type: number
      description: >
        A calculated numerical quantity that represents an individual's weight
        to height ratio.
        2006410v3.0

  treatment:
    type: object

    treatment_or_therapy:
      enum:
        - yes
        - no
        - unknown

    treatment_intent_type:
      type: string
      description: >
        2793511v1.0

    therapeutic_agents:
      #should this be an array
      type: string
      description: >
        Agent Name (per NCI Thesaurus) (NCIt contains all experimental drugs and federates RxNorm containing approved drugs)

    days_to_treatment:
      type: number
      description: >
        Days

  cases:
    $ref: "definitions.yaml#/to_one"
  project_id:
    type: string
